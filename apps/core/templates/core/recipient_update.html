{% extends 'core/base.html' %}
{% block title %}Update Recipient{% endblock %}
{% block content %}
<style>
    form { max-width: 600px; }
    .form-group { margin-bottom: 20px; }
    label { display: block; margin-bottom: 5px; font-weight: bold; color: #333; }
    input, select, textarea { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px; }
    .btn { padding: 12px 30px; background: #667eea; color: white; border: none; border-radius: 5px; cursor: pointer; }
    .btn:hover { background: #764ba2; }
    .back-link { color: #667eea; text-decoration: none; margin-bottom: 20px; display: inline-block; }
    .info-box { background: #f8f9fa; padding: 15px; border-radius: 5px; margin-bottom: 20px; }
</style>

<a href="{% url 'core:recipient_list' %}" class="back-link">‚Üê Back to Recipients</a>

<h2>Update Recipient: {{ recipient.name }}</h2>

<div class="info-box">
    <strong>Recipient ID:</strong> {{ recipient.recipient_id }}<br>
    <strong>Blood Type:</strong> {{ recipient.blood_type }}<br>
    <strong>Primary Diagnosis:</strong> {{ recipient.primary_diagnosis }}<br>
    <strong>Registration Date:</strong> {{ recipient.registration_date }}
</div>

<form method="post">
    {% csrf_token %}
    
    <div class="form-group">
        <label>Medical Urgency Level (1-5) *</label>
        <select name="medical_urgency_level" required>
            <option value="5" {% if recipient.medical_urgency_level == 5 %}selected{% endif %}>5 - Critical/Emergency</option>
            <option value="4" {% if recipient.medical_urgency_level == 4 %}selected{% endif %}>4 - High Urgency</option>
            <option value="3" {% if recipient.medical_urgency_level == 3 %}selected{% endif %}>3 - Medium Urgency</option>
            <option value="2" {% if recipient.medical_urgency_level == 2 %}selected{% endif %}>2 - Low Urgency</option>
            <option value="1" {% if recipient.medical_urgency_level == 1 %}selected{% endif %}>1 - Stable</option>
        </select>
    </div>
    
    <div class="form-group">
        <label>Status *</label>
        <select name="status" required>
            <option value="Waiting" {% if recipient.status == 'Waiting' %}selected{% endif %}>Waiting</option>
            <option value="Transplanted" {% if recipient.status == 'Transplanted' %}selected{% endif %}>Transplanted</option>
            <option value="Deceased" {% if recipient.status == 'Deceased' %}selected{% endif %}>Deceased</option>
            <option value="Inactive" {% if recipient.status == 'Inactive' %}selected{% endif %}>Inactive</option>
        </select>
    </div>
    
    <div class="form-group">
        <label>Contact Info *</label>
        <textarea name="contact_info" rows="2" required>{{ recipient.contact_info }}</textarea>
    </div>
    
    <div class="form-group">
        <label>Insurance Information</label>
        <textarea name="insurance_info" rows="2">{{ recipient.insurance_info }}</textarea>
    </div>
    
    <button type="submit" class="btn">Update Recipient</button>
</form>
{% endblock %}