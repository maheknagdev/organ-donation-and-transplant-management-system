{% extends 'core/base.html' %}
{% block title %}Priority Calculation{% endblock %}
{% block content %}
<style>
    .back-link { color: #667eea; text-decoration: none; margin-bottom: 20px; display: inline-block; }
    .result-box { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px; border-radius: 10px; text-align: center; }
    .big-score { font-size: 5em; font-weight: bold; margin: 20px 0; }
    .breakdown { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-top: 30px; }
    .breakdown-item { background: rgba(255,255,255,0.1); padding: 20px; border-radius: 8px; }
    .procedure-note { background: #d1ecf1; padding: 15px; border-radius: 5px; margin-top: 20px; color: #0c5460; }
</style>

<a href="{% url 'core:waitlist' %}" class="back-link">‚Üê Back to Waitlist</a>

<h2>üéØ Priority Score Calculation</h2>

<div style="background: #f8f9fa; padding: 15px; border-radius: 5px; margin-bottom: 20px;">
    <strong>Recipient:</strong> {{ recipient.name }}<br>
    <strong>Organ Type:</strong> {{ organ_type }}<br>
    <strong>Current Urgency:</strong> Level {{ recipient.medical_urgency_level }}
</div>

{% if priority_data %}
<div class="result-box">
    <h3>Calculated Priority Score</h3>
    <div class="big-score">{{ priority_data.New_Priority_Score|floatformat:1 }}</div>
    
    <div class="breakdown">
        <div class="breakdown-item">
            <h4>Urgency Points</h4>
            <p style="font-size: 2em; font-weight: bold;">{{ priority_data.Urgency_Points|floatformat:0 }}</p>
            <small>40% weight</small>
        </div>
        <div class="breakdown-item">
            <h4>Wait Time Points</h4>
            <p style="font-size: 2em; font-weight: bold;">{{ priority_data.Wait_Points|floatformat:0 }}</p>
            <small>30% weight<br>{{ priority_data.Days_Waiting }} days waiting</small>
        </div>
        <div class="breakdown-item">
            <h4>Organ-Specific Points</h4>
            <p style="font-size: 2em; font-weight: bold;">{{ priority_data.Organ_Specific_Points|floatformat:0 }}</p>
            <small>30% weight</small>
        </div>
    </div>
</div>


{% endif %}
{% endblock %}