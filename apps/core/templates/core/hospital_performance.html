{% extends 'core/base.html' %}
{% block title %}Hospital Performance Report{% endblock %}
{% block content %}
<style>
    .back-link { color: #667eea; text-decoration: none; margin-bottom: 20px; display: inline-block; }
    table { width: 100%; border-collapse: collapse; background: white; }
    th, td { padding: 12px; text-align: left; border-bottom: 1px solid #ddd; }
    th { background: #667eea; color: white; }
    tr:hover { background: #f5f5f5; }
    .success-rate { font-weight: bold; }
    .rate-high { color: #155724; }
    .rate-medium { color: #856404; }
    .rate-low { color: #721c24; }
</style>

<a href="/" class="back-link">‚Üê Back to Dashboard</a>

<h2>üè• Hospital Performance Report</h2>
<p style="color: #666; margin-bottom: 20px;">Transplant success rates by hospital</p>

<table>
    <thead>
        <tr>
            <th>Hospital</th>
            <th>Location</th>
            <th>Total Surgeries</th>
            <th>Successful</th>
            <th>Complications</th>
            <th>Failed</th>
            <th>Success Rate</th>
        </tr>
    </thead>
    <tbody>
        {% for hospital in hospitals %}
        <tr>
            <td><strong>{{ hospital.Hospital_Name }}</strong></td>
            <td>{{ hospital.City }}, {{ hospital.State }}</td>
            <td>{{ hospital.Total_Surgeries|default:"0" }}</td>
            <td>{{ hospital.Successful_Surgeries|default:"0" }}</td>
            <td>{{ hospital.Surgeries_With_Complications|default:"0" }}</td>
            <td>{{ hospital.Failed_Surgeries|default:"0" }}</td>
            <td>
                {% if hospital.Success_Rate_Percentage is not None %}
                    <span class="success-rate 
                        {% if hospital.Success_Rate_Percentage >= 80 %}rate-high
                        {% elif hospital.Success_Rate_Percentage >= 60 %}rate-medium
                        {% else %}rate-low{% endif %}">
                        {{ hospital.Success_Rate_Percentage|floatformat:1 }}%
                    </span>
                {% else %}
                    <span style="color: #999;">0.0%</span>
                {% endif %}
            </td>
        </tr>
        {% empty %}
        <tr><td colspan="7" style="text-align: center; padding: 40px;">
            No hospital data available. Schedule surgeries to see performance metrics.
        </td></tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}